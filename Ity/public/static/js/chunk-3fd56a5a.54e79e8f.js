(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fd56a5a"],{"0541":function(t,e,n){"use strict";n("352c")},"277f":function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return r})),n.d(e,"g",(function(){return s})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"a",(function(){return u}));var i=n("b775");function o(t){return Object(i["a"])({url:"/notifications",method:"post",data:t})}function a(t){return Object(i["a"])({url:"/notification",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/notification/allRead",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/notification/unReadCount",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/notification/send",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/notification/read",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/notification/admins",method:"post",data:t})}},"352c":function(t,e,n){},"3f5e":function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return c})),n.d(e,"d",(function(){return l}));var i=n("b775");function o(t){return Object(i["a"])({url:"/file/download",method:"post",responseType:"blob",timeout:0,data:t})}function a(t){return Object(i["a"])({url:"/files",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/file/delete",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/file/deleteDirectory",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/file/makeDirectory",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/file/uploadUnPermission",method:"post",data:t})}},"7b0d":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{top:"30px",title:t.$t("common.details"),visible:t.notificationInfoShow},on:{"update:visible":function(e){t.notificationInfoShow=e}}},[n("el-form",{attrs:{"label-position":"top"}},[n("el-form-item",{attrs:{label:t.$t("notification.form")}},[t._v(" "+t._s(t.notificationInfoData.data?t.notificationInfoData.data.form:"")+" ")]),n("el-form-item",{attrs:{label:t.$t("notification.message")}},[n("Tinymce",{attrs:{id:t.notificationInfoData?t.notificationInfoData.id:"",value:t.notificationInfoData.data?t.notificationInfoData.data.message:"",statusbar:!1,height:400,toolbar:[""],menubar:"",readonly:!0,"editor-image":!1}})],1),n("el-form-item",{attrs:{label:t.$t("common.createdAt")}},[t._v(" "+t._s(t.rTime(t.notificationInfoData.created_at))+" ")])],1)],1)},o=[],a=n("8256"),r=n("277f"),s=n("ed08"),c={name:"Info",components:{Tinymce:a["a"]},data:function(){return{notificationInfoShow:!1,notificationInfoData:{}}},methods:{rTime:function(t){return Object(s["g"])(t)},notificationId:function(t){var e=this;Object(r["c"])({id:t}).then((function(t){e.notificationInfoShow=!0,e.notificationInfoData=t.data,Object(r["g"])().then((function(t){var n=t.data.count;e.$emit("notificationCount",n)})),e.$emit("getNotifications")}))}}},l=c,u=n("2877"),d=Object(u["a"])(l,i,o,!1,null,"1adab64b",null);e["default"]=d.exports},8256:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[n("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),t._v(" "),t.editorImage?n("div",{staticClass:"editor-custom-btn-container"},[n("editorImage",{staticClass:"editor-upload-btn",on:{successCBK:t.imageSuccessCBK}})],1):t._e()])},o=[],a=(n("b680"),n("a9e3"),n("ac1f"),n("00b4"),n("d3b7"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-container"},[n("el-button",{attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" "+t._s(t.$t("file.uploadFile"))+" ")]),n("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v(" "+t._s(t.$t("file.uploadFileText.uploadText2"))+" ")])],1),n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(" "+t._s(t.$t("common.cancelButtonText"))+" ")]),n("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(" "+t._s(t.$t("common.confirmButtonText"))+" ")])],1)],1)}),r=[],s=(n("b64b"),n("d81d"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),{name:"EditorSlideUpload",props:{},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every((function(e){return t.listObj[e].hasSuccess}))},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map((function(e){return t.listObj[e]}));this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(t,e){for(var n=e.uid,i=Object.keys(this.listObj),o=0,a=i.length;o<a;o++)if(this.listObj[i[o]].uid===n)return this.listObj[i[o]].url=t.files.file,void(this.listObj[i[o]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,n=Object.keys(this.listObj),i=0,o=n.length;i<o;i++)if(this.listObj[n[i]].uid===e)return void delete this.listObj[n[i]]},beforeUpload:function(t){var e=this,n=window.URL||window.webkitURL,i=t.uid;return this.listObj[i]={},new Promise((function(o,a){var r=new Image;r.src=n.createObjectURL(t),r.onload=function(){e.listObj[i]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},o(!0)}))}}}),c=s,l=(n("0541"),n("2877")),u=Object(l["a"])(c,a,r,!1,null,"5c2b9a24",null),d=u.exports,f=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],m=f,h=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],p=h,b=n("b85c"),g=[];function v(){return window.tinymce}var y=function(t,e){var n=document.getElementById(t),i=e||function(){};if(!n){var o=document.createElement("script");o.src=t,o.id=t,document.body.appendChild(o),g.push(i);var a="onload"in o?r:s;a(o)}function r(e){e.onload=function(){this.onerror=this.onload=null;var t,n=Object(b["a"])(g);try{for(n.s();!(t=n.n()).done;){var i=t.value;i(null,e)}}catch(o){n.e(o)}finally{n.f()}g=null},e.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+t),e)}}function s(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e,n=Object(b["a"])(g);try{for(n.s();!(e=n.n()).done;){var i=e.value;i(null,t)}}catch(o){n.e(o)}finally{n.f()}g=null}}}n&&i&&(v()?i(null,n):g.push(i))},_=y,w=n("3f5e"),k="https://cdn.jsdelivr.net/npm/tinymce@5.6.1/tinymce.min.js",I={name:"Tinymce",components:{editorImage:d},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},statusbar:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},editorImage:{type:Boolean,default:!0},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"},loading:!0}},computed:{language:function(){return this.languageTypeList[this.$store.getters.language]},containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{id:function(t){this.hasChange=!1},value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))},language:function(){var t=this;this.destroyTinymce(),this.$nextTick((function(){return t.initTinymce()}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;_(k,(function(e){if(e)return console.log(e),void t.$message.error(e.message);t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({skin:"oxide",language:this.language,language_url:"https://cdn.jsdelivr.net/npm/tinymce-lang/langs/".concat(this.language,".js"),selector:"#".concat(this.tinymceId),height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:p,readonly:this.readonly,menubar:this.menubar,plugins:m,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,branding:!1,statusbar:this.statusbar,nonbreaking_force_tab:!0,save_onsavecallback:function(){return!1},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))},init_instance_callback:function(n){e.value&&n.setContent(e.value),e.hasInit=!0,e.loading=!1,n.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",n.getContent())}))},convert_urls:!1,images_upload_handler:function(t,e,n,i){i(0);var o=new FormData;o.append("file",t.blob()),o.append("directory","notification"),Object(w["d"])(o).then((function(t){e(t.data.realPath),i(100)}))}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach((function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))}))}}},j=I,C=(n("9ec4"),Object(l["a"])(j,i,o,!1,null,"f7cb224e",null));e["a"]=C.exports},"87cd":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form",{ref:"formInline",attrs:{inline:!0,model:t.formInline}},[n("el-form-item",{attrs:{label:t.$t("notification.message"),prop:"message"}},[n("el-input",{attrs:{placeholder:t.$t("notification.message")},model:{value:t.formInline.message,callback:function(e){t.$set(t.formInline,"message",e)},expression:"formInline.message"}})],1),n("el-form-item",{attrs:{label:t.$t("notification.is_read")}},[n("el-select",{attrs:{placeholder:t.$t("notification.is_read")},model:{value:t.formInline.is_read,callback:function(e){t.$set(t.formInline,"is_read",e)},expression:"formInline.is_read"}},[n("el-option",{attrs:{label:t.$t("exception.solveStatus.all"),value:""}}),n("el-option",{attrs:{label:t.$t("notification.is_read0"),value:0}}),n("el-option",{attrs:{label:t.$t("notification.is_read1"),value:1}})],1)],1),n("el-form-item",{attrs:{label:t.$t("common.createTime"),prop:"time"}},[n("el-date-picker",{attrs:{type:"datetimerange","picker-options":t.pickerOptions,"range-separator":"~","start-placeholder":t.$t("common.startTime"),"end-placeholder":t.$t("common.endTime"),align:"right"},model:{value:t.formInline.time,callback:function(e){t.$set(t.formInline,"time",e)},expression:"formInline.time"}})],1),n("el-col",[n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(t._s(t.$t("common.search")))]),n("el-button",{on:{click:function(e){return t.resetForm("formInline")}}},[t._v(t._s(t.$t("common.reset")))])],1)],1)],1)],1),n("el-col",{attrs:{span:24}},[n("el-form",{attrs:{inline:!0}},[n("el-form-item",[n("router-link",{attrs:{to:"/notification/send"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-s-promotion"}},[t._v(" "+t._s(t.$t("notification.send"))+" ")])],1)],1),n("el-form-item",[n("el-dropdown",[n("el-button",{attrs:{type:"primary"}},[t._v(" "+t._s(t.$t("notification.is_read1"))+" "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[n("span",{on:{click:t.readHandle}},[t._v(t._s(t.$t("notification.read")))])]),n("el-dropdown-item",[n("span",{on:{click:t.allReadHandle}},[t._v(t._s(t.$t("notification.allRead")))])])],1)],1)],1)],1)],1),n("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{span:24}},[n("el-col",{attrs:{span:24}},[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:t.tableData,"default-sort":{prop:t.sort,order:t.order}},on:{"sort-change":t.tableSortChange,"cell-dblclick":t.notificationInfo}},[n("el-table-column",{attrs:{type:"selection",selectable:t.checkSelect,width:"55"}}),n("el-table-column",{attrs:{width:"25px"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-message",style:{color:null===t.row.read_at?"#E6A23C":"#C0C4CC"}})]}}])}),n("el-table-column",{attrs:{label:t.$t("notification.message")},scopedSlots:t._u([{key:"default",fn:function(e){return[null===e.row.read_at?n("span",[n("strong",[t._v(t._s(e.row.data))])]):n("span",[t._v(t._s(e.row.data))])]}}])}),n("el-table-column",{attrs:{prop:"created_at",label:t.$t("common.createdAt"),formatter:t.rTime,sortable:""}})],1)],1),n("el-col",{staticClass:"margin-t-10",attrs:{span:24}},[n("el-pagination",{attrs:{"page-sizes":[10,25,50],"page-size":10,"current-page":t.offset,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1),n("info",{ref:"notificationInfo",on:{notificationCount:t.notificationCount,getNotifications:t.getNotifications}})],1)},o=[],a=(n("4e82"),n("d3b7"),n("159b"),n("4360")),r=n("277f"),s=n("ed08"),c=n("7b0d"),l={name:"Notification",components:{Info:c["default"]},data:function(){return{total:0,loading:!0,order:"descending",sort:"created_at",offset:0,limit:10,tableData:[],formInline:{message:"",is_read:"",time:""},pickerOptions:{shortcuts:[{text:this.$t("common.week"),onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:this.$t("common.oneMonth"),onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:this.$t("common.threeMonth"),onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-7776e6),t.$emit("pick",[n,e])}}]}}},mounted:function(){this.getNotifications()},methods:{getNotifications:function(){var t=this;this.loading=!0;var e={offset:this.offset,limit:this.limit,order:this.order,sort:this.sort,message:this.formInline.message};""!==Object(s["g"])(this.formInline.time[0])&&(e["start_at"]=Object(s["g"])(this.formInline.time[0])),""!==Object(s["g"])(this.formInline.time[1])&&(e["end_at"]=Object(s["g"])(this.formInline.time[1])),""!==this.formInline.is_read&&(e["is_read"]=this.formInline.is_read),Object(r["d"])(e).then((function(e){var n=e.data;t.loading=!1,t.tableData=n.notifications,t.total=n.total}))},tableSortChange:function(t){this.order=t.order?t.order:"descending",this.sort=t.prop,this.offset=0,this.getNotifications()},rTime:function(t,e){return Object(s["g"])(t[e.property])},handleSizeChange:function(t){this.limit=t,this.getNotifications()},handleCurrentChange:function(t){this.offset=t,this.getNotifications()},onSubmit:function(){this.offset=0,this.getNotifications()},resetForm:function(t){this.$refs[t].resetFields(),this.offset=0,this.getNotifications()},notificationInfo:function(t,e){this.$refs.notificationInfo.notificationId(t.id),this.notificationInfoId=t.id},checkSelect:function(t,e){var n=!0;return n=null===t.read_at,n},allReadHandle:function(){var t=this;Object(r["b"])().then((function(e){t.getNotifications(),t.notificationCount(0)}))},readHandle:function(){var t=this,e=[],n=this.$refs.multipleTable.store.states.selection;n.forEach((function(t){e.push(t.id)})),e.length>0?Object(r["e"])({id:e}).then((function(e){t.getNotifications(),Object(r["g"])().then((function(e){var n=e.data.count;t.notificationCount(n)}))})):this.$message.error(this.$t("notification.checkMessage"))},notificationCount:function(t){a["a"].dispatch("user/notificationCount",t)}}},u=l,d=n("2877"),f=Object(d["a"])(u,i,o,!1,null,"664e96d4",null);e["default"]=f.exports},"9ec4":function(t,e,n){"use strict";n("c37f")},c37f:function(t,e,n){}}]);