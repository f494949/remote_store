(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12e5dae0"],{"0b23":function(t,e,a){},"1fb9":function(t,e,a){"use strict";a("0b23")},ecac:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"updateForm",attrs:{model:t.updateForm,"label-width":"auto"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:t.$t("admin.name"),prop:"name",error:t.error.name?t.error.name[0]:""}},[a("el-input",{model:{value:t.updateForm.name,callback:function(e){t.$set(t.updateForm,"name",e)},expression:"updateForm.name"}})],1),a("el-form-item",{attrs:{label:t.$t("admin.email"),prop:"email",error:t.error.email?t.error.email[0]:""}},[a("el-input",{model:{value:t.updateForm.email,callback:function(e){t.$set(t.updateForm,"email",e)},expression:"updateForm.email"}})],1),a("el-form-item",{attrs:{label:t.$t("admin.password"),prop:"password",error:t.error.password?t.error.password[0]:""}},[a("el-input",{attrs:{"show-password":"",placeholder:t.$t("admin.emptyPasswordText")},model:{value:t.updateForm.password,callback:function(e){t.$set(t.updateForm,"password",e)},expression:"updateForm.password"}})],1),t.wechatOpen||t.dingTalkOpen?a("el-form-item",[a("table",{staticClass:"el-table",attrs:{border:"0",cellpadding:"0",cellspacing:"0"}},[a("colgroup",[a("col",{attrs:{name:"el-table_1_column_1",width:"100"}}),a("col",{attrs:{name:"el-table_1_column_2",width:"200"}}),a("col",{attrs:{name:"el-table_1_column_3",width:"120"}}),a("col",{attrs:{name:"el-table_1_column_4",width:"120"}}),a("col",{attrs:{name:"el-table_1_column_5",width:"500"}})]),a("thead",[a("tr",[a("th",{staticClass:"el-table_1_column_1 is-leaf el-table__cell",attrs:{colspan:"1",rowspan:"1"}},[a("div",{staticClass:"cell"},[t._v(t._s(t.$t("system.user.bindingInfo")))])]),a("th",{staticClass:"el-table_1_column_2 is-leaf el-table__cell",attrs:{colspan:"1",rowspan:"1"}},[a("div",{staticClass:"cell"},[t._v(t._s(t.$t("system.user.detail")))])]),a("th",{staticClass:"el-table_1_column_3 is-leaf el-table__cell",attrs:{colspan:"1",rowspan:"1"}},[a("div",{staticClass:"cell"},[t._v(t._s(t.$t("system.user.bindingTime")))])]),a("th",{staticClass:"el-table_1_column_4 is-leaf el-table__cell",attrs:{colspan:"1",rowspan:"1"}},[a("div",{staticClass:"cell"},[t._v(t._s(t.$t("system.user.syncTime")))])]),a("th",{staticClass:"el-table_1_column_5 is-leaf el-table__cell",attrs:{colspan:"1",rowspan:"1"}},[a("div",{staticClass:"cell"},[t._v(t._s(t.$t("table.actions")))])])])]),a("tbody",[t.dingTalkOpen?a("tr",{staticClass:"el-table__row"},[a("td",{staticClass:"el-table_1_column_1 el-table__cell",attrs:{rowspan:"1",colspan:"1"}},[a("div",{staticClass:"cell"},[t._v(t._s(t.$t("system.dingtalk.name")))])]),a("td",{staticClass:"el-table_1_column_2 el-table__cell",attrs:{rowspan:"1",colspan:"1"}},[null!==t.dingTalk?a("div",{staticClass:"cell"},[a("div",{staticClass:"userinfo"},[a("el-avatar",{staticClass:"avatar",attrs:{size:"small",src:t.dingTalk.avatar}}),a("span",{staticClass:"name"},[t._v(t._s(t.dingTalk.name))])],1)]):a("div",{staticClass:"cell"},[t._v("-")])]),a("td",{staticClass:"el-table_1_column_3 el-table__cell",attrs:{rowspan:"1",colspan:"1"}},[null!==t.dingTalk?a("div",{staticClass:"cell"},[t._v(" "+t._s(t.dingTalk.created_at)+" ")]):a("div",{staticClass:"cell"},[t._v("-")])]),a("td",{staticClass:"el-table_1_column_4 el-table__cell",attrs:{rowspan:"1",colspan:"1"}},[null!==t.dingTalk?a("div",{staticClass:"cell"},[t._v(" "+t._s(t.dingTalk.updated_at)+" ")]):a("div",{staticClass:"cell"},[t._v("-")])]),a("td",{staticClass:"el-table_1_column_5 el-table__cell",attrs:{rowspan:"1",colspan:"1"}},[a("div",{staticClass:"cell"},[null!==t.dingTalk?a("div",{staticClass:"cell"},[a("el-button",{attrs:{type:"default"},on:{click:t.unbindDingTalk}},[a("svg-icon",{attrs:{"icon-class":"dingtalk"}}),t._v(" "+t._s(t.$t("system.dingtalk.unbind"))+" ")],1)],1):a("div",{staticClass:"cell"},[a("el-button",{attrs:{type:"default"},on:{click:t.dingTalkBind}},[a("svg-icon",{attrs:{"icon-class":"dingtalk"}}),t._v(" "+t._s(t.$t("system.dingtalk.bind"))+" ")],1)],1)])])]):t._e(),t.wechatOpen?a("tr",{staticClass:"el-table__row"},[a("td",{staticClass:"el-table_1_column_1 el-table__cell",attrs:{rowspan:"1",colspan:"1"}},[a("div",{staticClass:"cell"},[t._v(t._s(t.$t("system.wechat.name")))])]),a("td",{staticClass:"el-table_1_column_2 el-table__cell",attrs:{rowspan:"1",colspan:"1"}},[null!==t.wechat?a("div",{staticClass:"cell"},[a("div",{staticClass:"userinfo"},[a("el-avatar",{staticClass:"avatar",attrs:{size:"small",src:t.wechat.headimgurl}}),a("span",{staticClass:"name"},[t._v(t._s(t.wechat.nickname))])],1)]):a("div",{staticClass:"cell"},[t._v("-")])]),a("td",{staticClass:"el-table_1_column_3 el-table__cell",attrs:{rowspan:"1",colspan:"1"}},[null!==t.wechat?a("div",{staticClass:"cell"},[t._v(" "+t._s(t.wechat.created_at)+" ")]):a("div",{staticClass:"cell"},[t._v("-")])]),a("td",{staticClass:"el-table_1_column_4 el-table__cell",attrs:{rowspan:"1",colspan:"1"}},[null!==t.wechat?a("div",{staticClass:"cell"},[t._v(" "+t._s(t.wechat.updated_at)+" ")]):a("div",{staticClass:"cell"},[t._v("-")])]),a("td",{staticClass:"el-table_1_column_5 el-table__cell",attrs:{rowspan:"1",colspan:"1"}},[a("div",{staticClass:"cell"},[null!==t.wechat?a("div",{staticClass:"cell"},[a("el-button",{attrs:{type:"default"},on:{click:t.unbindWechat}},[a("svg-icon",{attrs:{"icon-class":"wechat"}}),t._v(" "+t._s(t.$t("system.wechat.unbind"))+" ")],1)],1):a("div",{staticClass:"cell"},[a("el-button",{attrs:{type:"default"},on:{click:t.wechatBind}},[a("svg-icon",{attrs:{"icon-class":"wechat"}}),t._v(" "+t._s(t.$t("system.wechat.bind"))+" ")],1)],1)])])]):t._e()])])]):t._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onUpdate("updateForm")}}},[t._v(t._s(t.$t("common.submit")))])],1)],1),a("nav-setting"),a("el-dialog",{attrs:{visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[a("div",{attrs:{id:"login_container"}})])],1)},l=[],n=(a("d3b7"),a("3ca3"),a("ddb0"),a("b0c0"),a("ac1f"),a("5319"),a("50fc")),i=a("c24f"),c=a("4360"),o=a("ed08"),r={name:"Profile",components:{navSetting:function(){return a.e("chunk-2d20902b").then(a.bind(null,"a6dd"))}},data:function(){return{updateForm:{name:"",email:"",password:""},formInline:{name:"",time:""},error:{},dingTalk:null,wechat:null,visible:!1,dingTalkOpen:!1,wechatOpen:!1}},watch:{$route:{handler:function(t){this.wechatBindCallBack(t.query)},immediate:!0}},created:function(){this.dingTalkBindCallBack()},mounted:function(){this.getUser(),this.getSetting()},methods:{getSetting:function(){var t=this;this.$store.dispatch("user/setting").then((function(e){t.dingTalkOpen=e.ding_talk_open,t.wechatOpen=e.wechat_open}))},getUser:function(){var t=this;Object(i["m"])().then((function(e){var a=e.data;t.updateForm.name=a.name,t.updateForm.email=a.email,t.getDingTalkInfo(),t.getWechatInfo()}))},onUpdate:function(t){var e=this;this.error={},""===this.updateForm.password&&delete this.updateForm.password,Object(n["k"])(this.updateForm).then((function(t){c["a"].dispatch("user/name",e.updateForm.name),e.$message({message:t.message,type:"success"}),e.updateVisible=!1})).catch((function(t){var a=t.response.data;422===a.code&&(e.error=a.data)}))},dingTalkBind:function(){Object(i["b"])().then((function(t){window.location.href=t.data.url}))},wechatBind:function(){var t=this;Object(i["d"])().then((function(e){Object(o["e"])("//res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js","WxLogin").then((function(){t.visible=!0,t.$nextTick((function(){var t=e.data;new WxLogin({self_redirect:!1,id:"login_container",appid:t.appid,scope:"snsapi_login",redirect_uri:t.redirect_uri,state:t.state,style:"",href:""})}))}))}))},getDingTalkInfo:function(){var t=this;Object(i["k"])().then((function(e){t.dingTalk=e.data}))},getWechatInfo:function(){var t=this;Object(i["x"])().then((function(e){t.wechat=e.data}))},dingTalkBindCallBack:function(){var t=this,e=Object(o["c"])(window.location.href);if(Object.prototype.hasOwnProperty.call(e,"authCode")){var a=this.$loading({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});Object(i["h"])({state:e.state.replace("#/profile/index","")}).then((function(s){var l=s.data.check;l?Object(i["a"])({state:e.state.replace("#/profile/index",""),code:e.authCode}).then((function(e){t.$message({message:e.message,type:"success"}),t.getDingTalkInfo()})).finally((function(){a.close()})):a.close()}))}},wechatBindCallBack:function(t){var e=this;if(Object.prototype.hasOwnProperty.call(t,"code")){this.visible=!1;var a=this.$loading({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});Object(i["w"])({state:t.state.replace("#/profile/index","")}).then((function(s){var l=s.data.check;l?Object(i["c"])({state:t.state.replace("#/profile/index",""),code:t.code,type:"oplatform"}).then((function(t){e.$message({message:t.message,type:"success"}),e.getWechatInfo()})).finally((function(){a.close()})):a.close()}))}},unbindDingTalk:function(){var t=this;Object(i["q"])().then((function(e){t.$message({message:e.message,type:"success"}),t.getDingTalkInfo()}))},unbindWechat:function(){var t=this;Object(i["r"])().then((function(e){t.$message({message:e.message,type:"success"}),t.getWechatInfo()}))}}},d=r,u=(a("1fb9"),a("2877")),_=Object(u["a"])(d,s,l,!1,null,null,null);e["default"]=_.exports}}]);