<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <template>
      <Modal title="在线沟通" v-model="chatVisible"
       draggable
       footer-hide
       :width="580" @on-cancel="cancel">
       <div class="chat">
         <div  class="chat-message-body" id ="chatform" @scroll="scroll"
          >
          <Spin v-if="loading">
            <Icon type="ios-loading" size=18 class="spin-icon-load"></Icon>
          </Spin>
            <div  dis-hover v-for="(item,index) in data"
             :key="index" class="message-card">
             <div :class="item.isOneself == 1?'message-row-right': 'message-row-left'">
               <img :src="item.avatar?item.avatar:defualtAvatar" 
                height="35" width="35" >
                <div class="message-content"> 
                  <div :style="item.isOneself == 1?'text-align:right;display: flex;flex-direction:row-reverse':''">
                    {{item.nickName}}
                    <span class="message-time">
                       {{item.createTime}}</span>
                    </div>
                  <div class="message-body">
                    {{item.content.msg}}
                    </div>
                 </div> 
              </div>
             </div>
          </div>
            <Input
            v-model="form.msg"
            type="textarea"
            style="margin:10px 0;"
            placeholder="主动一点，世界会更大！"
            :rows="4"
          />
         </div>
         <div class="footer-btn">
            <Button @click="cancel" type="text">取消</Button>
            <Button type="primary" @click="sendMsg">发送</Button>
          </div>
      </Modal>
    </template>
  </head>

  <body>
    <script src="https://cdn.staticfile.org/vue/3.2.36/vue.global.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      /* axios配置 请求-处理-响应*/
      axios.defaults.timeout = 2000 /*响应时间*/
      axios.defaults.headers.post['Content-Type'] =
        'application/x-www-form-urlencoded;charset=UTF-8' // 配置post请求头
      axios.defaults.headers.get['Content-Type'] =
        'application/json;charset=UTF-8' // 配置get请求头
      axios.defaults.baseURL = 'http://www.syf.com' // 配置接口地址

      axios
        .post('http://www.syf.com/learn.php', params)
        .then(
          (response) => {
            console.log(response)
          },
          (err) => {
            console.log(err)
          }
        )
        .catch((error) => {
          console.log(error)
        })

      // Vue.prototype.$http = axios;
      let app = new Vue({
        data: {},
        methods: {
          listen(event) {
            if (event.ctrlKey && event.keyCode === 13) {
              // if (event.shiftKey && event.keyCode === 13) {
              console.log('换行')
              this.messagesContents += '\n'
            } else if (event.keyCode === 13) {
              event.preventDefault() // 阻止浏览器默认换行操作*/
              this.sendMessage() // 发送文本
            }
          },
        },
      })
    </script>
  </body>
</html>
